# 穗腾科技

## 一面

### Q：讲一下 Vue2 和 Vue3 在 组件通信、响应式、性能优化有什么区别

> 我的回答
> 
> Vue2 响应式原理是 `Object.defineProperty`，在 Vue2 中如果给对象添加一个新的属性，是不会触发响应式的，因为没有绑定 `getter` 和 `setter`；而数组是通过遍历，给每一项绑定响应式，如果层级多需要深度递归绑定。对于数组的方法如 `push`、`pop`、`shift`、`unshift`、`splice`、`sort`、`reverse` 等，Vue2 会对这些方法进行重写，从而实现响应式。
>
> Vue3 响应式原理是 `Proxy`，它代理是直接代理整个对象，不管是新增还是删除属性，都会触发响应式。
>
> Vue2 想要给对象添加一个新属性，或者通过索引改变数组，需要使用 `Vue.set` 或 `Vue.delete`，Vue3 不需要。
>
> Vue2 组件通信是通过 `props` 和 `$emit` 实现，父组件拿子组件数据通过 `this.$refs`，子传父通过 `this.$emit` 触发父组件的事件。Vue3 组件通信是通过 `props` 和 `emit` 实现，父组件想要拿子组件数据需要子组件通过 `defineExpose` 暴露数据，父组件通过 `ref` 拿到子组件实例，再拿到子组件数据。

### Q：讲一下 Pinia 对比 Vuex 的优势

> 我的回答
> 
> Pinia 是 useHooks 的形式，Vuex 是组合式 API，参数只能定义在 `state` ，在 `mutations` 中同步修改值，异步操作只能在 `actions` 中。Pinia 可以直接用 `ref` 定义值，定义函数，直接修改值，还能通过插件实现本地存储

> [!INFO] Deepseek 回答
> |特性	|Vuex	|Pinia|
> |Vue 版本支持|	Vue 2 & 3|	专为 Vue 3 设计（兼容 Vue 2）|
> |TypeScript 支持	|需要额外声明|	完美支持（自动类型推断）|
> |API 设计|	较复杂（mutations/actions）|	极简 API（actions 统一操作）|
> |模块化|	需要 modules 配置	|自动模块化（文件即模块）|
> |代码分割|	需动态注册模块|	开箱即用（按需加载）|
> |DevTools 集成|	支持	更优支持（时间线/编辑等）|
> |包体积|	较大（2.6KB gzip）|	更轻量（1.5KB gzip）|
> |Composition API	|兼容（但不够自然）|	原生支持（完美契合）|
> 
> 1. 极简的 API 设计（核心优势）
>
>       Pinia 移除了 Vuex 中繁琐的 mutations：
>
>       ```javascript
>       // Vuex 的修改操作
>       mutations: {
>         SET_USER(state, user) {
>           state.user = user;
>         }
>       },
>       actions: {
>         async fetchUser({ commit }) {
>           const user = await api.getUser();
>           commit('SET_USER', user); // 需通过 mutation
>         }
>       }
>       
>       // Pinia 的修改操作（直接通过 action）
>       actions: {
>         async fetchUser() {
>           this.user = await api.getUser(); // 直接赋值
>         }
>       }
>       ```
> 2. 完美的 TypeScript 支持
>
>       Pinia 提供全自动类型推断：
>
>       ```typescript
>       // store/user.ts
>       export const useUserStore = defineStore('user', {
>         state: () => ({
>           name: 'Alice',
>           age: 28
>         }),
>         getters: {
>           doubleAge(): number { // 自动推断返回类型
>             return this.age * 2;
>           }
>         }
>       });
>       
>       // 组件中使用
>       const store = useUserStore();
>       store.name // 类型为 string
>       store.doubleAge // 类型为 number
>       ```
> 3. 极简的模块化设计
>
>       Pinia 采用文件即模块的零配置方案：
>
>       ```text
>       stores/
>         ├─ user.ts       // useUserStore()
>         ├─ product.ts    // useProductStore()
>         └─ cart.ts       // useCartStore()
>       ```
> 4. 更轻量高效
>
>       - 包体积减少约 40%
>       - 无嵌套模块，状态扁平化
>       - 更好的性能优化
>
> 5. Composition API 原生支持
>
>       Pinia 与 Composition API 完美融合：
>
>       ```javascript
>       // 在 setup 中使用
>       import { useUserStore } from '@/stores/user';
>       
>       export default {
>         setup() {
>           const userStore = useUserStore();
>           
>           // 计算属性自动更新
>           const isAdult = computed(() => userStore.age >= 18);
>           
>           return { userStore, isAdult };
>         }
>       }
>       ```
> 6. 更强大的 DevTools 支持
>       - 时间线追踪：清晰展示状态变化时序
>       - Store 热更新：修改代码后保持状态
>       - 直接编辑状态：调试时实时修改
>       - Action 日志：记录参数和耗时

### Q：讲一下 ts 的 常用配置

> 我的回答
> 
> `变量: 类型` 来声明类型；`as` 断言；`?` 可选；`!` 非空；`T` 泛型；`Pick` `Omit` 等。

### Q：之前用 JS 如何确保健壮性

> 我的回答
> 
> 人为用 `if` 手写校验判断规则，不符合则 `return` 错误信息。

### Q：视频分销项目怎么结果多端兼容性问题

> 我的回答
> 
> 小差异用注释 `#ifdef` 处理

### Q：接到新需求时开发前会不会先考虑差异性问题

> 我的回答
> 
> 比如开发蓝牙功能，会先去看 `uniapp` 有没有适配多端，没有的话就去官方看看有没有人有相关问题解决。

### Q：怎么优化地图echart图渲染

> 我的回答
> 
> `echart` 图在左右两侧，通过 `IntersectionObserver` 监听滚动，当滚动到指定位置时，再去渲染那些 `echart` 图。

### Q：如果有多个地图扎点，如何优化

> 我的回答
> 
> 分别渲染，每次渲染20个，分多次渲染

### Q：还有其他方法么

> 我的回答
> 
> 暂时没想到

### Q：如何封装echart图

> 我的回答
> 
> 封装成组件，以柱状图为例，x轴y轴等固定的参数直接封装，是否需要单位、数据、柱体颜色宽度、`tooltip` 统一 `props` 传入。

### Q：音果项目SKU组件封装的思路，为什么要封装

> 我的回答
> 
> 封装成组件，方便快速落地，组件高内聚低耦合

### Q：如何迁移项目 Vue2 到 Vue3

> 我的回答
> 
> 没做过，想法是先升级到 Vue2.7，可适配 2 和 3，然后逐步迁移。

### Q：有没有了解后台管理框架

> 我的回答
> 
> 没怎么接触过

### Q：拉一个新项目下来，如何设置权限

> 我的回答
> 
> 后端返回权限列表，前端通过动态路由添加。组件权限用自定义事件

### Q：echart图x轴实现滚动

> 我的回答
> 
> `dataZoom`

### Q：vite等构建工具的配置

> 我的回答
> 
> base、publicPath、代理、别名、build打包等

### Q：项目上线跨域问题怎么解决

> 我的回答
> 
> 前端设置 `ngnix` 代理

## 二面