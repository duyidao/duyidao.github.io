---
title: ç½‘ç»œçŠ¶æ€ç›‘æŽ§
description: JavaScript å®žçŽ°ç½‘ç»œçŠ¶æ€ç›‘æŽ§
keywords: JavaScript, webapi, ç½‘ç»œçŠ¶æ€ç›‘æŽ§
---

# ç½‘ç»œçŠ¶æ€ç›‘æŽ§

å‰ç«¯ `window` æœ‰ä¸€ä¸ªå†…ç½® API æ–¹æ³•å¯ä»¥ç”¨äºŽç›‘æŽ§ç”¨æˆ·çš„ç½‘ç»œçŠ¶æ€ã€å»¶è¿Ÿå’Œå¸¦å®½ç­‰æ•°æ®ã€‚ä¸‹é¢ç®€å•çœ‹ä¸€ä¸‹è¯¥å±žæ€§çš„ä»‹ç»ã€‚

## å‰ç½®çŸ¥è¯†

- Navigatorï¼š`connection` å±žæ€§

  > **å®žéªŒæ€§:** **è¿™æ˜¯ä¸€é¡¹[å®žéªŒæ€§æŠ€æœ¯](https://developer.mozilla.org/zh-CN/docs/MDN/Writing_guidelines/Experimental_deprecated_obsolete#å®žéªŒæ€§)**
  > åœ¨å°†å…¶ç”¨äºŽç”Ÿäº§ä¹‹å‰ï¼Œè¯·ä»”ç»†æ£€æŸ¥[æµè§ˆå™¨å…¼å®¹æ€§è¡¨æ ¼](https://developer.mozilla.org/zh-CN/docs/Web/API/Navigator/connection#æµè§ˆå™¨å…¼å®¹æ€§)ã€‚

  **`Navigator.connection`** åªè¯»å±žæ€§è¿”å›žä¸€ä¸ªåŒ…å«æœ‰å…³ç³»ç»Ÿç½‘ç»œè¿žæŽ¥ä¿¡æ¯çš„ [`NetworkInformation`](https://developer.mozilla.org/zh-CN/docs/Web/API/NetworkInformation) å¯¹è±¡ï¼Œä¾‹å¦‚ç”¨æˆ·è®¾å¤‡çš„å½“å‰å¸¦å®½æˆ–è¿žæŽ¥æ˜¯å¦æŒ‰æµé‡è®¡è´¹ã€‚

  è¿™å¯ä»¥ç”¨äºŽåŸºäºŽç”¨æˆ·çš„è¿žæŽ¥çŠ¶æ€æ¥é€‰æ‹©é«˜æ¸…æ™°åº¦å†…å®¹æˆ–ä½Žæ¸…æ™°åº¦å†…å®¹ã€‚

  å€¼ï¼šä¸€ä¸ª [`NetworkInformation`](https://developer.mozilla.org/zh-CN/docs/Web/API/NetworkInformation) å¯¹è±¡ã€‚åŒ…å«çš„å±žæ€§å¦‚ä¸‹ï¼š

  - `effectiveType` ï¼šç½‘ç»œç±»åž‹
  - `rtt` ï¼šå»¶è¿Ÿï¼Œå•ä½æ˜¯æ¯«ç§’
  - `downlink` ï¼šå¸¦å®½é€Ÿåº¦

  å…·ä½“æ•ˆæžœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

  ![connection](https://pic.imgdb.cn/item/6533be00c458853aef560ff5.jpg)

- Windowï¼š`online` äº‹ä»¶

  å½“æµè§ˆå™¨èƒ½å¤Ÿè®¿é—®ç½‘ç»œï¼Œä¸” [`Navigator.onLine` (en-US)](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/onLine) çš„å€¼è¢«è®¾ä¸º `true` æ—¶ï¼Œ[`Window`](https://developer.mozilla.org/zh-CN/docs/Web/API/Window) æŽ¥å£çš„ **`online`** äº‹ä»¶å°†è¢«è§¦å‘ã€‚

  > [!NOTE] ðŸ“ å¤‡æ³¨
  > è¯¥äº‹ä»¶ä¸èƒ½ç”¨äºŽç¡®å®šæŸä¸ªç½‘ç«™å¯å¦è®¿é—®ã€‚ç½‘ç«™è‡ªèº«é—®é¢˜æˆ–é˜²ç«å¢™éƒ½æœ‰å¯èƒ½é˜»æ­¢å¯¹ç‰¹å®šç½‘ç«™çš„è®¿é—®ã€‚

  | æ˜¯å¦å†’æ³¡     | å¦    |
  | :--------------------- | ----------- |
  | æ˜¯å¦å¯å–æ¶ˆ             | å¦                                                           |
  | æŽ¥å£                   | [`Event`](https://developer.mozilla.org/zh-CN/docs/Web/API/Event) |
  | Event handler property | `ononline`                                                   |

  ::: code-group
  ```js [addEventListener version.js]
  window.addEventListener("online", (event) => {
    console.log("You are now connected to the network.");
  });
  ```
  ```js [ononline version.js]
  window.ononline = (event) => {
    console.log("You are now connected to the network.");
  };
  ```
  :::

## æ•ˆæžœå®žçŽ°

å› æ­¤å¯ä»¥åˆ©ç”¨ä¸Šæ–¹çš„ API æ–¹æ³•å®žçŽ°éœ€è¦çš„æ•ˆæžœï¼Œä»£ç å¦‚ä¸‹ï¼š

```js
function getNetworkInfo() {
  let info
  if(navigator.onLine) {
    info = {
      type: navigator.connection.effectiveType,
      rtt: navigator.connection.rtt,
      downlink: navigator.connection.downlink
    }
  } else {
    type: 'offLine'
  }
    
  return info
}
```

å¦‚ä½•æ£€æµ‹åˆ°ä¿¡æ¯å˜åŒ–å‘¢ï¼Ÿ

1. å¦‚æžœæ˜¯æƒ³è¦æ£€æµ‹å½“å‰æ˜¯å¦åœ¨çº¿ï¼Œå¯ä»¥é€šè¿‡ `online` å’Œ `offline` äº‹ä»¶å®žçŽ°ã€‚
2. å¦‚æžœæƒ³æ£€æµ‹ç½‘ç»œçŠ¶æ€çš„å˜åŒ–ï¼Œä¸Šé¢çš„æ–¹æ³•ä¸å†é€‚ç”¨ï¼Œå¯ä»¥é€šè¿‡ `navigator.connection` çš„ `change` æ–¹æ³•å®žçŽ°ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```js
window.addEventListener('online', () => {
  // ...
})

window.addEventListener('offline', () => {
  // ...
})

navigator.connection.addEventListener('change', () => {
  // ...
})
```

## æ€»ä½“æ•ˆæžœ
<Iframe url="https://duyidao.github.io/blogweb/#/detail/js/navigator" />