# 网络分层模型

## 五层网络模型

经过不断演化，网络最终形成五层模型：

| 分层 | 协议 | 功能 |
| ---- | ---- | ---- |
| 应用层 | HTTP、FTP、DNS、SMTP、POP3 | 网络应用到具体场景，不同场景建立不同协议来应对不同事情。 |
| 传输层 | TCP、UDP | 数据怎么传输，如何保证消息可靠传递。TCP是可靠传输协议，数据包传输时出错了TCP会自动纠错；UDP是广播协议，直播用的是UDP，如果卡顿过了就过了，不是很可靠。 |
| 网络层 | IP、路由器 | 如何在互联网中找到对方，通过IP地址定位对方。 |
| 数据链路层 | 交换机、MAC | 如何在子网中如何找到对方的MAC地址，MAC地址相当于电脑的指纹，出生就固定了。 |
| 物理层 | 光纤、集线器 | 不同设备之间的信息交互传输协议，如使用什么信号来传输，电信号还是光信号，光信号用什么波，电信号的波峰和波普等。 |

> [!WARNING] 注意
> IP 地址和 MAC 地址是两个不同的概念，IP 地址是网络层协议，MAC 地址是数据链路层协议。IP 地址是动态唯一，同一台设备有可能会变化；MAC 地址是静态唯一。

## 数据的传输

数据在传输中，发送方从上往下，是封装的过程，每一层都会加上自己的协议头等而外的信息；接收方从下往上，是解封装的过程，每一层都认识各自的信息，会去掉自己的协议头。

![数据的传输过程](http://mdrs.yuanjin.tech/img/20211008163458.png)

从发送方开始，发送方发送一条文本数据，会经过以下步骤：

1. 应用层，将文本数据封装成 HTTP 协议，发送给传输层。
2. 传输层，将 HTTP 协议封装成 TCP 协议，发送给网络层。
3. 网络层，将 TCP 协议封装成 IP 协议，发送给数据链路层。
4. 数据链路层，将 IP 协议封装成 MAC 协议，发送给物理层。
5. 物理层，将 MAC 协议转换为相应的信号发送给接收方。

接收方收到数据后，会经过以下步骤：

1. 物理层，将信号转换为 MAC 协议，发送给数据链路层。
2. 数据链路层，将 MAC 协议解封装成 IP 协议，发送给网络层。
3. 网络层，将 IP 协议解封装成 TCP 协议，发送给传输层。
4. 传输层，将 TCP 协议解封装成 HTTP 协议，发送给应用层。
5. 应用层，将 HTTP 协议解封装成文本数据，供应用使用。

## 四层、五层、七层

最早的时候，官方标准还没形成，民间因为各自的需求，而自发约定了各种说法，比如四层、五层、七层等。

![数据的传输过程](http://mdrs.yuanjin.tech/img/20211008164017.png)

- 四层模型：应用层、传输层、网络层、物理链路层
  
  物理链路层为数据链路层、物理层的合并。

- 七层模型：应用层、表示层、会话层、传输层、网络层、数据链路层、物理层
  
  表示层、会话层和应用层关系密切，没必要分这么细致，对于实际应用开发帮助不大，因此日常并不承认，只存在教科书上。

- 五层模型：应用层、传输层、网络层、数据链路层、物理层
