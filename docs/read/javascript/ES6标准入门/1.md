## ç¬¬ä¸€ç«  ECMAScript6ç®€ä»‹

### ç”±æ¥

ç¬¬ä¸€ç« ç¬¬ä¸€èŠ‚è®²è¿°äº† ES6 è¿™ä¸ªåç§°çš„ç”±æ¥ï¼Œé¦–å…ˆéœ€è¦ç†æ¸… ECMAScript å’Œ Javascript çš„å…³ç³»ã€‚åœ¨æœ€å¼€å§‹ Javascript ä¸å« Javascriptï¼Œè€Œæ˜¯å« ECMAScriptã€‚å› æ­¤ï¼Œ**ECMAScript æ˜¯ Javascript çš„è§„æ ¼ï¼ŒJavascript æ˜¯ ECMAScript çš„ä¸€ç§å®ç°**ã€‚

### å«ä¹‰

2011å¹´ï¼Œ ECMAScript 5.1 ç‰ˆæœ¬å‘å¸ƒåï¼Œ6.0 ç‰ˆæœ¬å¼€å§‹åˆ¶å®šï¼Œè¿™ä¸ªç‰ˆæœ¬æ”¹åŠ¨è¾ƒå¤§ï¼Œåˆ¶å®šè€…å¸Œæœ›èƒ½å¤Ÿ6.1ã€6.2ã€6.3æŒç»­æ¨è¿›ï¼Œæœ€ç»ˆå†³å®šæ¯å¹´6æœˆæ›´æ–°å‘å¸ƒä¸€æ¬¡æ ‡å‡†ç‰ˆæœ¬ã€‚2016å¹´6æœˆï¼Œå‘å¸ƒäº† ECMAScript 6.0 ç‰ˆæœ¬ã€‚

::: info ğŸ–‡ æ‹“å±•
å› æ­¤ï¼ŒES6 æ—¢æ˜¯ä¸€ä¸ªå†å²åè¯ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªæ³›æŒ‡ï¼Œå«ä¹‰æ˜¯ 5.1 ç‰ˆæœ¬ä»¥åçš„ JavaScript çš„ä¸‹ä¸€ä»£ æ ‡å‡†ï¼Œæ¶µç›–äº† ES2015ã€ ES2016ã€ ES2017 ç­‰ï¼Œè€Œ ES2015 åˆ™æ˜¯æ­£å¼åç§°ï¼Œç‰¹æŒ‡å½“å¹´å‘å¸ƒçš„æ­£å¼ ç‰ˆæœ¬çš„è¯­è¨€æ ‡å‡†ã€‚
:::

### ææ¡ˆæ‰¹å‡†æµç¨‹

- Stage 0: Strawman (å±•ç¤ºé˜¶æ®µ)
- Stage I : Proposal (å¾æ±‚æ„è§é˜¶æ®µ)
- Stage 2: Draft (è‰æ¡ˆé˜¶æ®µ)
- Stage 3: Candidate (å€™é€‰é˜¶æ®µ)
- Stage 4: Finished (å®šæ¡ˆé˜¶æ®µ)

### å†å²

ES6ä»å¼€å§‹åˆ¶å®šåˆ°æœ€åå‘å¸ƒç”¨äº†æ•´æ•´15å¹´ã€‚1997å¹´å‘å¸ƒçš„ES1.0æ˜¯ç¬¬ä¸€ä¸ªç‰ˆæœ¬ï¼Œéšåè¿ç»­å‘å¸ƒäº†ES2.0å’ŒES3.0ã€‚ES3.0æˆä¸ºé€šè¡Œæ ‡å‡†ï¼Œå¥ å®šäº†JavaScriptè¯­è¨€çš„åŸºæœ¬è¯­æ³•ã€‚

åœ¨2000å¹´ï¼ŒES4.0å¼€å§‹é…é…¿ï¼Œä½†æœ€åæ²¡æœ‰é€šè¿‡ã€‚ES6åˆ¶å®šçš„èµ·ç‚¹å…¶å®å¯ä»¥è¿½æº¯åˆ°2000å¹´ã€‚ES4.0æ²¡æœ‰é€šè¿‡æ˜¯å› ä¸ºè¯¥ç‰ˆæœ¬å¯¹ES3.0åšäº†å½»åº•å‡çº§ï¼Œå¯¼è‡´æ ‡å‡†å§”å‘˜ä¼šçš„ä¸€äº›æˆå‘˜ä¸æ„¿æ„æ¥å—ã€‚

2008å¹´ï¼ŒECMAå†³å®šä¸­æ­¢ES4.0çš„å¼€å‘ï¼Œå¹¶å°†å…¶ä¸­æ¶‰åŠç°æœ‰åŠŸèƒ½æ”¹å–„çš„éƒ¨åˆ†å‘å¸ƒä¸ºES3.1ï¼Œå…¶ä»–æ¿€è¿›è®¾æƒ³æ”¾å…¥ä»¥åçš„ç‰ˆæœ¬ã€‚

2009å¹´ï¼ŒES5.0å‘å¸ƒï¼Œè€ŒES Harmonyç»§ç»­å‘å±•æˆä¸ºES6ã€‚2015å¹´ï¼ŒES6æ­£å¼é€šè¿‡æˆä¸ºå›½é™…æ ‡å‡†ã€‚æ•´ä¸ªè¿‡ç¨‹å†æ—¶15å¹´ã€‚

### Babel

`babel.js` æ˜¯ ES6 è½¬ç å™¨ï¼Œåœ¨æµè§ˆå™¨ä¸æ”¯æŒ ES6 è¯­æ³•æ—¶è½¬ç ä¸º ES5 ï¼Œè¿™æ ·å°±èƒ½æ‰§è¡Œäº†ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š

::: code-group
  ```js [è½¬ç å‰]
  let arr = []
  arr.map(item => item.id + 1)
  ```
  ```js [è½¬ç å]
  var arr = []
  arr.map(function (item) {
    return item.id + 1
  })
  ```
:::

å…¶ä¸­é˜®ä¸€å³°è€å¸ˆä»ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ä»‹ç»è®²è§£èµ·äº† `babel` ï¼š

- é…ç½®æ–‡ä»¶ `.babelrc` 

  è¿™æ˜¯æ”¾ç½®åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­ï¼Œç”¨äºè®¾ç½®è½¬ç è§„åˆ™å’Œæ’ä»¶ï¼Œå…¶åŸºæœ¬åŒ…å« `presets` å’Œ `plugins` ä¸¤ä¸ªå‚æ•°ã€‚å…¶ä¸­`presets` ç”¨äºè®¾å®šè½¬ç è§„åˆ™ï¼Œé€šè¿‡ `npm` ä¸‹è½½ä¾èµ–ï¼Œä¸‹è½½ååœ¨ `presets` æ•°ç»„ä¸­æ·»åŠ å¯¹åº”çš„è§„åˆ™ã€‚ä¾‹å­å¦‚ä¸‹ï¼š

  ::: code-group
  ```js [.babelrc]
  {
    "presets": [],
    "plugins": []
  }
  ```
  ```js [presetsè¯¦ç»†å‚æ•°]
  {
    "presets": [
      "latest",
      "react",
      "stage-2",
    ],
    "plugins": []
  }
  ```
  :::
  > [!WARNING] âš  æ³¨æ„
  > è¦æƒ³ä½¿ç”¨ä»¥ä¸‹æ‰€æœ‰ Babel å·¥å…·å’Œæ¨¡å—ï¼Œéƒ½å¿…é¡»å…ˆå†™å¥½ .babelrcã€‚

- å‘½ä»¤è¡Œè½¬ç  `babel-cli` 

  Babel æä¾› `babel-cli` å·¥å…·ï¼Œç”¨äºå‘½ä»¤è¡Œè½¬ç  ã€‚ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š

  1. ä¸‹è½½ä¾èµ–
   
  2. æ”¹å†™ `package.json` æ–‡ä»¶
   
  3. æ‰“åŒ…è½¬ç 

  ::: code-group
     ```shell [ä¸‹è½½ä¾èµ–]
     npm i --save-dev babel-cli
     ```
     ```json [æ”¹å†™package.jsonæ–‡ä»¶]
     {
       // ...
       "devDependencies": {
         "babel-cli": "^6.0.0"
       },
       "scripts": {
         "build": "babel src -d lib"
       }
     }
     ```
     ```shell [æ‰“åŒ…è½¬ç ]
     npm run build
     ```
  :::

- babel-node

  è¿™æ˜¯ `babel-cli` è‡ªå¸¦çš„å‘½ä»¤ï¼Œç”¨äºæä¾›æ”¯æŒ ES6 çš„ REPL ç¯å¢ƒï¼Œç›´æ¥è¿è¡Œ ES6 ä»£ç ã€‚

- babel-register

  ä¿®æ”¹ `require` å‘½ä»¤ï¼Œåç»­ä½¿ç”¨ `require` åŠ è½½ `.js` ã€`jsx` ã€`.es` å’Œ `.es6` æ–‡ä»¶æ—¶ï¼Œä¼šä¼˜å…ˆä½¿ç”¨ `babel` è½¬ç ã€‚

  > [!WARNING] âš  æ³¨æ„
  > `babel-register` åªä¼šå¯¹ `require` å‘½ä»¤åŠ è½½çš„æ–‡ä»¶è¿›è¡Œè½¬ç ï¼Œè€Œä¸ä¼šå¯¹å½“å‰æ–‡ä»¶è¿›è¡Œè½¬ç  ã€‚ å¦å¤–ï¼Œç”±äºå®ƒæ˜¯å®æ—¶è½¬ç ï¼Œæ‰€ä»¥åªé€‚åˆåœ¨å¼€å‘ç¯å¢ƒä¸­ä½¿ç”¨ ã€‚

- babel-core

  å¯¹éœ€è¦çš„æŸæ¨¡å—ä»£ç è½¬ç ã€‚

  ::: code-group
  ```shell [ä¸‹è½½ä¾èµ–]
  npm install babel- core --save
  ```
  ```js [ä½¿ç”¨ç¤ºä¾‹]
  var es6Code = 'let x = n => n + 1' 
  var esSCode = require('babel-core').transform (es6Code, { presets: [' latest']}).code;
  ```
  :::

- babel-polyfill

  Babel é»˜è®¤åªè½¬æ¢æ–°çš„ `JavaScript` å¥æ³•( `syntax` )ï¼Œè€Œä¸è½¬æ¢æ–°çš„ APIï¼Œå¦‚ `Iterator`ã€ `Generator`ã€ `Set`ã€ `Maps` ã€ `Proxy`ã€ `Reflect`ã€ `Symbol`ã€ `Promise` ç­‰å…¨å±€å¯¹è±¡ï¼Œä»¥åŠä¸€äº› å®šä¹‰åœ¨å…¨å±€å¯¹è±¡ä¸Šçš„æ–¹æ³•(å¦‚ `Object.assign` )éƒ½ä¸ä¼šè½¬ç ã€‚

  æƒ³è®©ä¸Šè¿°çš„æ–¹æ³•è¿è¡Œï¼Œå¿…é¡»ä½¿ç”¨ `babel-polyfill` ä¸ºå½“å‰ç¯å¢ƒæä¾›ä¸€ä¸ªå«ç‰‡ã€‚

### Traceur

`Traceur` æ˜¯Google å…¬å¸çš„è½¬ç å™¨ ä¹Ÿå¯ ä»¥å°† ES6 ä»£ç è½¬ä¸º ES5 ä»£ç ã€‚å…·ä½“ä½¿ç”¨æ­¤å¤„ä¸åšè¿‡å¤šæè¿°ã€‚

### æ€»ç»“

ç¬¬ä¸€ç« æ•´ä½“ä¸ºæˆ‘ä»¬è®²è§£äº† javascript çš„å†å²å’Œå‘å±•å²ï¼Œä»¥åŠ ES6 å¹¿ä¹‰å’Œç‹­ä¹‰çš„å«ä¹‰ã€‚åœ¨æµè§ˆå™¨ä¸æ”¯æŒ ES6 æ–°è¯­æ³•æ—¶å¦‚ä½•ä½¿ç”¨ babel è½¬æˆ ES5 ç­‰ã€‚